{"ast":null,"code":"var _jsxFileName = \"/Users/zoe/Documents/Wishread/src/pages/DetailPage/DetailPage.tsx\",\n  _s = $RefreshSig$();\nimport { faBookmark as fasBookmark } from \"@fortawesome/free-solid-svg-icons\";\nimport { faBookmark as farBookmark } from \"@fortawesome/free-regular-svg-icons\";\nimport { faChevronLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport WishBookItemImg from \"components/Book/WishBookItemImg\";\nimport WishBookItemInfo from \"components/Book/WishBookItemInfo\";\nimport IconButton from \"components/common/Button/IconButton\";\nimport { useEffect } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { useRecoilState, useRecoilValue } from \"recoil\";\nimport { bookmarkState, detailState, recentState } from \"recoil/atoms/atoms\";\nimport { filteredBookmarkSelector } from \"recoil/selectors/selectors\";\nimport styled from \"styled-components\";\nimport FootPage from \"pages/MainPage/FootPage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DetailPage() {\n  _s();\n  var _location$state;\n  const location = useLocation();\n  // 선택된 책 정보\n  const result = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.result;\n  const barcode = location.state.result.isbn;\n  // 선택됐는지 확인 여부\n  const watch = location.state.watch;\n  console.log(result);\n  const [detail, setDetail] = useRecoilState(detailState);\n\n  // 최근 검색기록\n  const [recent, setRecent] = useRecoilState(recentState);\n  const [bookmarkList, setBookmarkList] = useRecoilState(bookmarkState);\n  const filteredBookmark = useRecoilValue(filteredBookmarkSelector(result));\n\n  // 1.먼저 선택됐는지 안됐는지 상태값과\n  //  선택된 첵 isbn 값을 가지고 새로운 배열에 추가\n  // 만약 선택된 책 isbn 값이 배열에 있으면 빼고, 없으면 추가\n  //\n  useEffect(() => {\n    if (watch) {\n      if (recent.findIndex(item => item.isbn === barcode) === -1) {\n        const newRecent = [...recent];\n        newRecent.push(result);\n        setRecent(newRecent);\n      }\n    }\n  }, [recent]);\n\n  // 뒤로가기\n  const navigate = useNavigate();\n  const goBack = () => {\n    navigate(-1);\n  };\n\n  // 나의 위시북\n\n  const isWishBook = bookmarkList.find(({\n    isbn\n  }) => isbn.includes(String(barcode)));\n  const toggleBookmark = () => {\n    let wishBookList = [...bookmarkList];\n    if (!isWishBook) {\n      wishBookList.push(result);\n      setBookmarkList(wishBookList);\n    } else {\n      wishBookList = wishBookList.filter(({\n        isbn\n      }) => isbn !== barcode);\n      setBookmarkList(wishBookList);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: [/*#__PURE__*/_jsxDEV(IconWrap, {\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        icon: faChevronLeft,\n        fontSize: \"20px\",\n        color: \"#0047AB\",\n        onClick: goBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        icon: isWishBook ? fasBookmark : farBookmark,\n        fontSize: \"20px\",\n        color: \"#0047AB\",\n        onClick: toggleBookmark\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(WishBookItemImg, {\n      title: result.title,\n      thumbnail: result.thumbnail,\n      page: \"detail\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(WishBookItemInfo, {\n      authors: result.authors,\n      contents: result.contents,\n      datetime: result.datetime,\n      isbn: result.isbn,\n      price: result.price,\n      publisher: result.publisher,\n      sale_price: result.sale_price,\n      status: result.status,\n      thumbnail: result.thumbnail,\n      title: result.title,\n      translators: result.translators,\n      url: result.url,\n      page: \"detail\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FootPage, {\n      page: \"detail\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s(DetailPage, \"hgoW3MkZ3q1evhH7IGK4zOD6e+k=\", false, function () {\n  return [useLocation, useRecoilState, useRecoilState, useRecoilState, useRecoilValue, useNavigate];\n});\n_c = DetailPage;\nexport default DetailPage;\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n`;\n_c2 = Wrapper;\nconst IconWrap = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px var(--pd-content);\n`;\n_c3 = IconWrap;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"DetailPage\");\n$RefreshReg$(_c2, \"Wrapper\");\n$RefreshReg$(_c3, \"IconWrap\");","map":{"version":3,"names":["faBookmark","fasBookmark","farBookmark","faChevronLeft","WishBookItemImg","WishBookItemInfo","IconButton","useEffect","useLocation","useNavigate","useRecoilState","useRecoilValue","bookmarkState","detailState","recentState","filteredBookmarkSelector","styled","FootPage","jsxDEV","_jsxDEV","DetailPage","_s","_location$state","location","result","state","barcode","isbn","watch","console","log","detail","setDetail","recent","setRecent","bookmarkList","setBookmarkList","filteredBookmark","findIndex","item","newRecent","push","navigate","goBack","isWishBook","find","includes","String","toggleBookmark","wishBookList","filter","Wrapper","children","IconWrap","icon","fontSize","color","onClick","fileName","_jsxFileName","lineNumber","columnNumber","title","thumbnail","page","authors","contents","datetime","price","publisher","sale_price","status","translators","url","_c","div","_c2","_c3","$RefreshReg$"],"sources":["/Users/zoe/Documents/Wishread/src/pages/DetailPage/DetailPage.tsx"],"sourcesContent":["import { faBookmark as fasBookmark } from \"@fortawesome/free-solid-svg-icons\";\nimport { faBookmark as farBookmark } from \"@fortawesome/free-regular-svg-icons\";\nimport { faChevronLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport WishBookItemImg from \"components/Book/WishBookItemImg\";\nimport WishBookItemInfo from \"components/Book/WishBookItemInfo\";\nimport IconButton from \"components/common/Button/IconButton\";\nimport { BookDTO } from \"components/types/searchType\";\nimport { useEffect, useState } from \"react\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { useRecoilState, useRecoilValue } from \"recoil\";\nimport { bookmarkState, detailState, recentState } from \"recoil/atoms/atoms\";\nimport { filteredBookmarkSelector } from \"recoil/selectors/selectors\";\nimport styled from \"styled-components\";\nimport FootPage from \"pages/MainPage/FootPage\";\n\nfunction DetailPage(): JSX.Element {\n  const location = useLocation();\n  // 선택된 책 정보\n  const result = location.state?.result;\n  const barcode = location.state.result.isbn;\n  // 선택됐는지 확인 여부\n  const watch = location.state.watch;\n  console.log(result);\n  const [detail, setDetail] = useRecoilState(detailState);\n\n  // 최근 검색기록\n  const [recent, setRecent] = useRecoilState(recentState);\n  const [bookmarkList, setBookmarkList] = useRecoilState(bookmarkState);\n  const filteredBookmark = useRecoilValue(filteredBookmarkSelector(result));\n\n  // 1.먼저 선택됐는지 안됐는지 상태값과\n  //  선택된 첵 isbn 값을 가지고 새로운 배열에 추가\n  // 만약 선택된 책 isbn 값이 배열에 있으면 빼고, 없으면 추가\n  //\n  useEffect(() => {\n    if (watch) {\n      if (recent.findIndex((item: BookDTO) => item.isbn === barcode) === -1) {\n        const newRecent: string[] = [...recent];\n        newRecent.push(result);\n        setRecent(newRecent);\n      }\n    }\n  }, [recent]);\n\n  // 뒤로가기\n  const navigate = useNavigate();\n  const goBack = () => {\n    navigate(-1);\n  };\n\n  // 나의 위시북\n\n  const isWishBook = bookmarkList.find(({ isbn }: BookDTO) =>\n    isbn.includes(String(barcode))\n  );\n  const toggleBookmark = () => {\n    let wishBookList = [...bookmarkList];\n\n    if (!isWishBook) {\n      wishBookList.push(result);\n      setBookmarkList(wishBookList);\n    } else {\n      wishBookList = wishBookList.filter(({ isbn }) => isbn !== barcode);\n      setBookmarkList(wishBookList);\n    }\n  };\n\n  return (\n    <Wrapper>\n      <IconWrap>\n        <IconButton\n          icon={faChevronLeft}\n          fontSize=\"20px\"\n          color=\"#0047AB\"\n          onClick={goBack}\n        />\n        <IconButton\n          icon={isWishBook ? fasBookmark : farBookmark}\n          fontSize=\"20px\"\n          color=\"#0047AB\"\n          onClick={toggleBookmark}\n        ></IconButton>\n      </IconWrap>\n      <WishBookItemImg\n        title={result.title}\n        thumbnail={result.thumbnail}\n        page=\"detail\"\n      ></WishBookItemImg>\n      <WishBookItemInfo\n        authors={result.authors}\n        contents={result.contents}\n        datetime={result.datetime}\n        isbn={result.isbn}\n        price={result.price}\n        publisher={result.publisher}\n        sale_price={result.sale_price}\n        status={result.status}\n        thumbnail={result.thumbnail}\n        title={result.title}\n        translators={result.translators}\n        url={result.url}\n        page=\"detail\"\n      ></WishBookItemInfo>\n      <FootPage page=\"detail\" />\n    </Wrapper>\n  );\n}\n\nexport default DetailPage;\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n`;\nconst IconWrap = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px var(--pd-content);\n`;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}