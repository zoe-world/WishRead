{"ast":null,"code":"import { selectorFamily } from \"recoil\";\nimport axios, { AxiosError } from \"axios\";\nimport { bookState } from \"recoil/atoms\";\n// kakao API 호출\nconst KAKAO_API_KEY = process.env.REACT_APP_KAKAO_API_KEY;\nexport const bookData = selectorFamily({\n  key: \"bookData\",\n  get: search => async ({\n    get\n  }) => {\n    let bookInfo = get(bookState);\n    // API 호출\n    try {\n      const res = await axios({\n        method: \"get\",\n        baseURL: \"https://dapi.kakao.com/v3/search/book\",\n        headers: {\n          Authorization: \"KakaoAK \" + KAKAO_API_KEY\n        },\n        params: {\n          query: search,\n          size: 50,\n          target: [\"title\", \"person\"]\n        }\n      });\n      bookInfo = res.data.documents;\n      console.log(bookInfo);\n      return bookInfo;\n    } catch (error) {\n      if (error instanceof AxiosError) {\n        var _error$response;\n        if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 400) {\n          console.log(error);\n        }\n      }\n    }\n  },\n  set: search => ({\n    set\n  }, newValue) => {\n    const test = newValue.map(el => {\n      return {\n        ...el,\n        watch: false\n      };\n    });\n    set(bookState, test);\n  }\n});","map":{"version":3,"names":["selectorFamily","axios","AxiosError","bookState","KAKAO_API_KEY","process","env","REACT_APP_KAKAO_API_KEY","bookData","key","get","search","bookInfo","res","method","baseURL","headers","Authorization","params","query","size","target","data","documents","console","log","error","_error$response","response","status","set","newValue","test","map","el","watch"],"sources":["/Users/zoe/Documents/Wishread/src/recoil/api.ts"],"sourcesContent":["import { selector, selectorFamily } from \"recoil\";\nimport axios, { AxiosError } from \"axios\";\nimport { bookState, searchInfoState } from \"recoil/atoms\";\nimport { BookDTO } from \"components/types/searchType\";\n\n// kakao API 호출\nconst KAKAO_API_KEY = process.env.REACT_APP_KAKAO_API_KEY;\n\nexport const bookData = selectorFamily({\n  key: \"bookData\",\n  get:\n    (search) =>\n    async ({ get }) => {\n      let bookInfo = get(bookState);\n      // API 호출\n      try {\n        const res = await axios({\n          method: \"get\",\n          baseURL: \"https://dapi.kakao.com/v3/search/book\",\n          headers: {\n            Authorization: \"KakaoAK \" + KAKAO_API_KEY,\n          },\n          params: {\n            query: search,\n            size: 50,\n            target: [\"title\", \"person\"],\n          },\n        });\n        bookInfo = res.data.documents;\n        console.log(bookInfo);\n        return bookInfo;\n      } catch (error) {\n        if (error instanceof AxiosError) {\n          if (error.response?.status === 400) {\n            console.log(error);\n          }\n        }\n      }\n    },\n  set:\n    (search) =>\n    ({ set }, newValue) => {\n      const test = newValue.map((el: BookDTO[]) => {\n        return { ...el, watch: false };\n      });\n      set(bookState, test);\n    },\n});\n"],"mappings":"AAAA,SAAmBA,cAAc,QAAQ,QAAQ;AACjD,OAAOC,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,SAASC,SAAS,QAAyB,cAAc;AAGzD;AACA,MAAMC,aAAa,GAAGC,OAAO,CAACC,GAAG,CAACC,uBAAuB;AAEzD,OAAO,MAAMC,QAAQ,GAAGR,cAAc,CAAC;EACrCS,GAAG,EAAE,UAAU;EACfC,GAAG,EACAC,MAAM,IACP,OAAO;IAAED;EAAI,CAAC,KAAK;IACjB,IAAIE,QAAQ,GAAGF,GAAG,CAACP,SAAS,CAAC;IAC7B;IACA,IAAI;MACF,MAAMU,GAAG,GAAG,MAAMZ,KAAK,CAAC;QACtBa,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE,uCAAuC;QAChDC,OAAO,EAAE;UACPC,aAAa,EAAE,UAAU,GAAGb;QAC9B,CAAC;QACDc,MAAM,EAAE;UACNC,KAAK,EAAER,MAAM;UACbS,IAAI,EAAE,EAAE;UACRC,MAAM,EAAE,CAAC,OAAO,EAAE,QAAQ;QAC5B;MACF,CAAC,CAAC;MACFT,QAAQ,GAAGC,GAAG,CAACS,IAAI,CAACC,SAAS;MAC7BC,OAAO,CAACC,GAAG,CAACb,QAAQ,CAAC;MACrB,OAAOA,QAAQ;IACjB,CAAC,CAAC,OAAOc,KAAK,EAAE;MACd,IAAIA,KAAK,YAAYxB,UAAU,EAAE;QAAA,IAAAyB,eAAA;QAC/B,IAAI,EAAAA,eAAA,GAAAD,KAAK,CAACE,QAAQ,cAAAD,eAAA,uBAAdA,eAAA,CAAgBE,MAAM,MAAK,GAAG,EAAE;UAClCL,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;QACpB;MACF;IACF;EACF,CAAC;EACHI,GAAG,EACAnB,MAAM,IACP,CAAC;IAAEmB;EAAI,CAAC,EAAEC,QAAQ,KAAK;IACrB,MAAMC,IAAI,GAAGD,QAAQ,CAACE,GAAG,CAAEC,EAAa,IAAK;MAC3C,OAAO;QAAE,GAAGA,EAAE;QAAEC,KAAK,EAAE;MAAM,CAAC;IAChC,CAAC,CAAC;IACFL,GAAG,CAAC3B,SAAS,EAAE6B,IAAI,CAAC;EACtB;AACJ,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}