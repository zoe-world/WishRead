{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/zoe/Documents/Wishread/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import{faBookmark as fasBookmark}from\"@fortawesome/free-solid-svg-icons\";import{faBookmark as farBookmark}from\"@fortawesome/free-regular-svg-icons\";import{faChevronLeft}from\"@fortawesome/free-solid-svg-icons\";import WishBookItemImg from\"components/Book/WishBookItemImg\";import WishBookItemInfo from\"components/Book/WishBookItemInfo\";import IconButton from\"components/common/Button/IconButton\";import{useEffect}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import{useRecoilState,useRecoilValue}from\"recoil\";import{bookDetailState,detailBookSelector}from\"recoil/books\";import styled from\"styled-components\";import FootPage from\"pages/MainPage/FootPage\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DetailPage(){var _location$state,_location$state2;const location=useLocation();// 선택된 책 정보\nconst result=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.result;let barcode=(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.result.isbn;barcode=barcode.split(\" \").join(\"\");// 상세보기 변경\nconst[detail,setDetail]=useRecoilState(bookDetailState);const detailBook=useRecoilValue(detailBookSelector(barcode));const onBookmarkToggle=bookCode=>{setDetail(prevBooks=>{return prevBooks.map(b=>{return b.isbn.split(\" \").join(\"\")===bookCode?{...b,isMarked:!b.isMarked}:b;});});};useEffect(()=>{if(detailBook!==undefined){// 중복확인\nconst isDuplicate=detail.some(item=>item.isbn===detailBook.isbn);if(!isDuplicate){setDetail(prev=>[...prev,detailBook]);}}else{}console.log(detailBook);},[detailBook]);// 뒤로가기\nconst navigate=useNavigate();const goBack=()=>{navigate(-1);};// 나의 위시북\nconst isWishBook=detail===null||detail===void 0?void 0:detail.some(v=>v.isbn.split(\" \").join(\"\")===barcode&&v.isMarked);return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(IconWrap,{children:[/*#__PURE__*/_jsx(IconButton,{icon:faChevronLeft,fontSize:\"20px\",color:\"#0047AB\",onClick:goBack}),/*#__PURE__*/_jsx(IconButton,{icon:isWishBook?fasBookmark:farBookmark,fontSize:\"20px\",color:\"#0047AB\",onClick:()=>onBookmarkToggle(barcode)})]}),/*#__PURE__*/_jsx(WishBookItemImg,{title:result.title,thumbnail:result.thumbnail,page:\"detail\"}),/*#__PURE__*/_jsx(WishBookItemInfo,{authors:result.authors,contents:result.contents,datetime:result.datetime,isbn:result.isbn,price:result.price,publisher:result.publisher,sale_price:result.sale_price,status:result.status,thumbnail:result.thumbnail,title:result.title,translators:result.translators,url:result.url,page:\"detail\"}),/*#__PURE__*/_jsx(FootPage,{page:\"detail\"})]});}export default DetailPage;const Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  min-height: 100vh;\\n\"])));const IconWrap=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 10px var(--pd-content);\\n\"])));","map":{"version":3,"names":["faBookmark","fasBookmark","farBookmark","faChevronLeft","WishBookItemImg","WishBookItemInfo","IconButton","useEffect","useLocation","useNavigate","useRecoilState","useRecoilValue","bookDetailState","detailBookSelector","styled","FootPage","jsx","_jsx","jsxs","_jsxs","DetailPage","_location$state","_location$state2","location","result","state","barcode","isbn","split","join","detail","setDetail","detailBook","onBookmarkToggle","bookCode","prevBooks","map","b","isMarked","undefined","isDuplicate","some","item","prev","console","log","navigate","goBack","isWishBook","v","Wrapper","children","IconWrap","icon","fontSize","color","onClick","title","thumbnail","page","authors","contents","datetime","price","publisher","sale_price","status","translators","url","div","_templateObject","_taggedTemplateLiteral","_templateObject2"],"sources":["/Users/zoe/Documents/Wishread/src/pages/DetailPage/DetailPage.tsx"],"sourcesContent":["import { faBookmark as fasBookmark } from \"@fortawesome/free-solid-svg-icons\";\nimport { faBookmark as farBookmark } from \"@fortawesome/free-regular-svg-icons\";\nimport { faChevronLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport WishBookItemImg from \"components/Book/WishBookItemImg\";\nimport WishBookItemInfo from \"components/Book/WishBookItemInfo\";\nimport IconButton from \"components/common/Button/IconButton\";\nimport { BookDTO } from \"components/types/searchType\";\nimport { useEffect, useState } from \"react\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { useRecoilState, useRecoilValue, useSetRecoilState } from \"recoil\";\nimport { bookDetailState, detailBookSelector } from \"recoil/books\";\nimport styled from \"styled-components\";\nimport FootPage from \"pages/MainPage/FootPage\";\n\nfunction DetailPage(): JSX.Element {\n  const location = useLocation();\n\n  // 선택된 책 정보\n  const result = location.state?.result;\n  let barcode = location.state?.result.isbn;\n  barcode = barcode.split(\" \").join(\"\");\n\n  // 상세보기 변경\n  const [detail, setDetail] = useRecoilState(bookDetailState);\n  const detailBook = useRecoilValue(detailBookSelector(barcode));\n\n  const onBookmarkToggle = (bookCode: string) => {\n    setDetail((prevBooks: any) => {\n      return prevBooks.map((b: any) => {\n        return b.isbn.split(\" \").join(\"\") === bookCode\n          ? { ...b, isMarked: !b.isMarked }\n          : b;\n      });\n    });\n  };\n\n  useEffect(() => {\n    if (detailBook !== undefined) {\n      // 중복확인\n      const isDuplicate = detail.some(\n        (item: BookDTO) => item.isbn === detailBook.isbn\n      );\n      if (!isDuplicate) {\n        setDetail((prev: any) => [...prev, detailBook]);\n      }\n    } else {\n    }\n    console.log(detailBook);\n  }, [detailBook]);\n\n  // 뒤로가기\n  const navigate = useNavigate();\n  const goBack = () => {\n    navigate(-1);\n  };\n\n  // 나의 위시북\n  const isWishBook = detail?.some(\n    (v: BookDTO) => v.isbn.split(\" \").join(\"\") === barcode && v.isMarked\n  );\n\n  return (\n    <Wrapper>\n      <IconWrap>\n        <IconButton\n          icon={faChevronLeft}\n          fontSize=\"20px\"\n          color=\"#0047AB\"\n          onClick={goBack}\n        />\n        <IconButton\n          icon={isWishBook ? fasBookmark : farBookmark}\n          fontSize=\"20px\"\n          color=\"#0047AB\"\n          onClick={() => onBookmarkToggle(barcode)}\n        ></IconButton>\n      </IconWrap>\n      <WishBookItemImg\n        title={result.title}\n        thumbnail={result.thumbnail}\n        page=\"detail\"\n      ></WishBookItemImg>\n      <WishBookItemInfo\n        authors={result.authors}\n        contents={result.contents}\n        datetime={result.datetime}\n        isbn={result.isbn}\n        price={result.price}\n        publisher={result.publisher}\n        sale_price={result.sale_price}\n        status={result.status}\n        thumbnail={result.thumbnail}\n        title={result.title}\n        translators={result.translators}\n        url={result.url}\n        page=\"detail\"\n      ></WishBookItemInfo>\n      <FootPage page=\"detail\" />\n    </Wrapper>\n  );\n}\n\nexport default DetailPage;\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n`;\nconst IconWrap = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px var(--pd-content);\n`;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}