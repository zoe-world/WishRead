{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/zoe/Documents/Wishread/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6;import{faBookmark}from\"@fortawesome/free-solid-svg-icons\";import SearchBar from\"components/Main/SearchBar\";import IconButton from\"components/common/Button/IconButton\";import{useEffect,useMemo}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{useRecoilState,useRecoilValue}from\"recoil\";import{bookDataSelectorFamily,bookDataState,searchInfoState,bookDetailState}from\"recoil/books\";import styled from\"styled-components\";import FootPage from\"./FootPage\";import WishBookItem from\"components/Book/WishBookItem\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function MainPage(){// 검색어 초기값 설정\nconst item=[\"이병률\",\"조예은\",\"정세랑\",\"김영하\"];const randomKeyword=(min,max)=>{return Math.trunc(Math.random()*(max-min+1));};const random=useMemo(()=>randomKeyword(1,item.length),[]);const[search,setSearch]=useRecoilState(searchInfoState);const searchKeword=search=>{if(!search){return item[random];}else{return search;}return true;};// 페이지 이동\nconst navigate=useNavigate();const goToWishBookPage=()=>navigate(\"/wishbook\");// 검색한 결과값\nconst bookSelector=useRecoilValue(bookDataSelectorFamily(searchKeword(search)));const[book,setBook]=useRecoilState(bookDataState);const detail=useRecoilValue(bookDetailState);useEffect(()=>{setBook(bookSelector);},[bookSelector,setBook]);const handleWatchToggle=bookCode=>{// watch 값을 토글\nsetBook(prevBooks=>{return prevBooks.map(b=>{return b.isbn.split(\" \").join(\"\")==bookCode&&!b.watch?{...b,watch:!b.watch,isMarked:false}:{...b,isMarked:false};});});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(Nav,{children:/*#__PURE__*/_jsx(IconButton,{fontSize:\"20px\",icon:faBookmark,title:\"\\uC704\\uC2DC\\uB9AC\\uC2A4\\uD2B8\",onClick:goToWishBookPage,color:\"#0047ab\"})}),/*#__PURE__*/_jsx(Logo,{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(LogoImg,{src:require(\"assets/images/logo.png\"),alt:\"WISHREAD \\uB85C\\uACE0\"})})}),/*#__PURE__*/_jsx(SearchBar,{})]}),!search?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Title,{children:\"\\uCD5C\\uADFC \\uAC80\\uC0C9\\uD55C \\uCC45\"}),/*#__PURE__*/_jsx(WishBookList,{children:detail.length!==0?detail.filter(v=>v.watch).map(result=>/*#__PURE__*/_jsx(WishBookItem,{result:result,onWatchToggle:()=>handleWatchToggle(result.isbn.split(\" \").join(\"\"))},result.isbn.split(\" \").join(\"\"))):/*#__PURE__*/_jsx(_Fragment,{children:\"\\uAC80\\uC0C9\\uD55C \\uCC45\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})})]}):\"\",!search?/*#__PURE__*/_jsx(Title,{children:\"\\uCD94\\uCC9C\\uCC45\"}):/*#__PURE__*/_jsx(Title,{children:\"\\uAC80\\uC0C9\\uACB0\\uACFC\"}),/*#__PURE__*/_jsx(WishBookList,{children:bookSelector.map(result=>/*#__PURE__*/_jsx(WishBookItem,{result:result,onWatchToggle:()=>handleWatchToggle(result.isbn.split(\" \").join(\"\"))},result.isbn.split(\" \").join(\"\")))}),/*#__PURE__*/_jsx(FootPage,{page:\"main\"})]});}export default MainPage;const Header=styled.header(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  position: sticky;\\n  z-index: 9999;\\n  top: 0;\\n  padding: 10px var(--pd-content);\\n  background-color: var(--inner-bg-color);\\n\"])));const Nav=styled.nav(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: flex-end;\\n  align-items: center;\\n\"])));const Logo=styled.h1(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  width: 200px;\\n  height: auto;\\n\"])));const LogoImg=styled.img(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: block;\\n  width: 100%;\\n\"])));const WishBookList=styled.ul(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-wrap: wrap;\\n  gap: 15px;\\n  row-gap: 15px;\\n  padding: 30px;\\n\"])));export const Title=styled.h2(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  padding: 2rem var(--pd-content) 0;\\n  font-size: 2rem;\\n\"])));","map":{"version":3,"names":["faBookmark","SearchBar","IconButton","useEffect","useMemo","Link","useNavigate","useRecoilState","useRecoilValue","bookDataSelectorFamily","bookDataState","searchInfoState","bookDetailState","styled","FootPage","WishBookItem","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MainPage","item","randomKeyword","min","max","Math","trunc","random","length","search","setSearch","searchKeword","navigate","goToWishBookPage","bookSelector","book","setBook","detail","handleWatchToggle","bookCode","prevBooks","map","b","isbn","split","join","watch","isMarked","children","Header","Nav","fontSize","icon","title","onClick","color","Logo","to","LogoImg","src","require","alt","Title","WishBookList","filter","v","result","onWatchToggle","page","header","_templateObject","_taggedTemplateLiteral","nav","_templateObject2","h1","_templateObject3","img","_templateObject4","ul","_templateObject5","h2","_templateObject6"],"sources":["/Users/zoe/Documents/Wishread/src/pages/MainPage/MainPage.tsx"],"sourcesContent":["import { faBookmark } from \"@fortawesome/free-solid-svg-icons\";\nimport SearchBar from \"components/Main/SearchBar\";\nimport IconButton from \"components/common/Button/IconButton\";\nimport { BookDTO } from \"components/types/searchType\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport { selector, useRecoilState, useRecoilValue } from \"recoil\";\nimport {\n  bookDataSelectorFamily,\n  bookDataState,\n  searchInfoState,\n  detailBookSelector,\n  bookDetailState,\n} from \"recoil/books\";\nimport styled from \"styled-components\";\nimport FootPage from \"./FootPage\";\nimport WishBookItem from \"components/Book/WishBookItem\";\nimport { watch } from \"fs\";\n\nfunction MainPage(): JSX.Element {\n  // 검색어 초기값 설정\n  const item = [\"이병률\", \"조예은\", \"정세랑\", \"김영하\"];\n  const randomKeyword = (min: number, max: number) => {\n    return Math.trunc(Math.random() * (max - min + 1));\n  };\n\n  const random = useMemo(() => randomKeyword(1, item.length), []);\n  const [search, setSearch] = useRecoilState(searchInfoState);\n\n  const searchKeword = (search: any) => {\n    if (!search) {\n      return item[random];\n    } else {\n      return search;\n    }\n    return true;\n  };\n  // 페이지 이동\n  const navigate = useNavigate();\n  const goToWishBookPage = () => navigate(\"/wishbook\");\n\n  // 검색한 결과값\n  const bookSelector = useRecoilValue(\n    bookDataSelectorFamily(searchKeword(search))\n  );\n\n  const [book, setBook] = useRecoilState(bookDataState);\n\n  const detail = useRecoilValue(bookDetailState);\n\n  useEffect(() => {\n    setBook(bookSelector);\n  }, [bookSelector, setBook]);\n\n  const handleWatchToggle = (bookCode: string) => {\n    // watch 값을 토글\n    setBook((prevBooks) => {\n      return prevBooks.map((b) => {\n        return b.isbn.split(\" \").join(\"\") == bookCode && !b.watch\n          ? { ...b, watch: !b.watch, isMarked: false }\n          : { ...b, isMarked: false };\n      });\n    });\n  };\n\n  return (\n    <>\n      <Header>\n        <Nav>\n          <IconButton\n            fontSize=\"20px\"\n            icon={faBookmark}\n            title=\"위시리스트\"\n            onClick={goToWishBookPage}\n            color={\"#0047ab\"}\n          />\n        </Nav>\n        <Logo>\n          <Link to=\"/\">\n            <LogoImg\n              src={require(\"assets/images/logo.png\")}\n              alt=\"WISHREAD 로고\"\n            />\n          </Link>\n        </Logo>\n        <SearchBar />\n      </Header>\n      {!search ? (\n        <>\n          <Title>최근 검색한 책</Title>\n          <WishBookList>\n            {detail.length !== 0 ? (\n              detail\n                .filter((v: any) => v.watch)\n                .map((result: any) => (\n                  <WishBookItem\n                    result={result}\n                    key={result.isbn.split(\" \").join(\"\")}\n                    onWatchToggle={() =>\n                      handleWatchToggle(result.isbn.split(\" \").join(\"\"))\n                    }\n                  />\n                ))\n            ) : (\n              <>검색한 책이 없습니다.</>\n            )}\n          </WishBookList>\n        </>\n      ) : (\n        ``\n      )}\n\n      {!search ? <Title>추천책</Title> : <Title>검색결과</Title>}\n      <WishBookList>\n        {bookSelector.map((result: BookDTO) => (\n          <WishBookItem\n            result={result}\n            key={result.isbn.split(\" \").join(\"\")}\n            onWatchToggle={() =>\n              handleWatchToggle(result.isbn.split(\" \").join(\"\"))\n            }\n          />\n        ))}\n      </WishBookList>\n      <FootPage page=\"main\" />\n    </>\n  );\n}\nexport default MainPage;\n\nconst Header = styled.header`\n  position: sticky;\n  z-index: 9999;\n  top: 0;\n  padding: 10px var(--pd-content);\n  background-color: var(--inner-bg-color);\n`;\n\nconst Nav = styled.nav`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n`;\nconst Logo = styled.h1`\n  display: flex;\n  width: 200px;\n  height: auto;\n`;\nconst LogoImg = styled.img`\n  display: block;\n  width: 100%;\n`;\nconst WishBookList = styled.ul`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 15px;\n  row-gap: 15px;\n  padding: 30px;\n`;\n\nexport const Title = styled.h2`\n  padding: 2rem var(--pd-content) 0;\n  font-size: 2rem;\n`;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}