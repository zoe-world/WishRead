{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/zoe/Documents/Wishread/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import{faBookmark as fasBookmark}from\"@fortawesome/free-solid-svg-icons\";import{faBookmark as farBookmark}from\"@fortawesome/free-regular-svg-icons\";import{faChevronLeft}from\"@fortawesome/free-solid-svg-icons\";import WishBookItemImg from\"components/Book/WishBookItemImg\";import WishBookItemInfo from\"components/Book/WishBookItemInfo\";import IconButton from\"components/common/Button/IconButton\";import{useEffect}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import{useRecoilState,useRecoilValue}from\"recoil\";import{bookmarkState,recentState}from\"recoil/atoms/atoms\";import{filteredBookmarkSelector}from\"recoil/selectors/selectors\";import styled from\"styled-components\";import FootPage from\"pages/MainPage/FootPage\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DetailPage(){const location=useLocation();// 선택된 책 정보\nconst result=location.state.result;const barcode=location.state.result.isbn;// 선택됐는지 확인 여부\nconst watch=location.state.watch;console.log(result);// 최근 검색기록\nconst[recent,setRecent]=useRecoilState(recentState);const[bookmarkList,setBookmarkList]=useRecoilState(bookmarkState);const filteredBookmark=useRecoilValue(filteredBookmarkSelector(result));// 1.먼저 선택됐는지 안됐는지 상태값과\n//  선택된 첵 isbn 값을 가지고 새로운 배열에 추가\n// 만약 선택된 책 isbn 값이 배열에 있으면 빼고, 없으면 추가\n//\nuseEffect(()=>{if(watch){if(recent.findIndex(item=>item.isbn===barcode)===-1){const newRecent=[...recent];newRecent.push(result);setRecent(newRecent);}}},[recent]);// 뒤로가기\nconst navigate=useNavigate();const goBack=()=>{navigate(-1);};// 나의 위시북\nconst isWishBook=bookmarkList.find(_ref=>{let{isbn}=_ref;return isbn.includes(String(barcode));});const toggleBookmark=()=>{let wishBookList=[...bookmarkList];if(!isWishBook){wishBookList.push(result);setBookmarkList(wishBookList);}else{wishBookList=wishBookList.filter(_ref2=>{let{isbn}=_ref2;return isbn!==barcode;});setBookmarkList(wishBookList);}};return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(IconWrap,{children:[/*#__PURE__*/_jsx(IconButton,{icon:faChevronLeft,fontSize:\"20px\",color:\"#0047AB\",onClick:goBack}),/*#__PURE__*/_jsx(IconButton,{icon:isWishBook?fasBookmark:farBookmark,fontSize:\"20px\",color:\"#0047AB\",onClick:toggleBookmark})]}),/*#__PURE__*/_jsx(WishBookItemImg,{title:result.title,thumbnail:result.thumbnail,page:\"detail\"}),/*#__PURE__*/_jsx(WishBookItemInfo,{authors:result.authors,contents:result.contents,datetime:result.datetime,isbn:result.isbn,price:result.price,publisher:result.publisher,sale_price:result.sale_price,status:result.status,thumbnail:result.thumbnail,title:result.title,translators:result.translators,url:result.url,page:\"detail\"}),/*#__PURE__*/_jsx(FootPage,{page:\"detail\"})]});}export default DetailPage;const Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  min-height: 100vh;\\n\"])));const IconWrap=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 10px var(--pd-content);\\n\"])));","map":{"version":3,"names":["faBookmark","fasBookmark","farBookmark","faChevronLeft","WishBookItemImg","WishBookItemInfo","IconButton","useEffect","useLocation","useNavigate","useRecoilState","useRecoilValue","bookmarkState","recentState","filteredBookmarkSelector","styled","FootPage","jsx","_jsx","jsxs","_jsxs","DetailPage","location","result","state","barcode","isbn","watch","console","log","recent","setRecent","bookmarkList","setBookmarkList","filteredBookmark","findIndex","item","newRecent","push","navigate","goBack","isWishBook","find","_ref","includes","String","toggleBookmark","wishBookList","filter","_ref2","Wrapper","children","IconWrap","icon","fontSize","color","onClick","title","thumbnail","page","authors","contents","datetime","price","publisher","sale_price","status","translators","url","div","_templateObject","_taggedTemplateLiteral","_templateObject2"],"sources":["/Users/zoe/Documents/Wishread/src/pages/DetailPage/DetailPage.tsx"],"sourcesContent":["import { faBookmark as fasBookmark } from \"@fortawesome/free-solid-svg-icons\";\nimport { faBookmark as farBookmark } from \"@fortawesome/free-regular-svg-icons\";\nimport { faChevronLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport WishBookItemImg from \"components/Book/WishBookItemImg\";\nimport WishBookItemInfo from \"components/Book/WishBookItemInfo\";\nimport IconButton from \"components/common/Button/IconButton\";\nimport { BookDTO } from \"components/types/searchType\";\nimport { useEffect, useState } from \"react\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { useRecoilState, useRecoilValue } from \"recoil\";\nimport { bookmarkState, recentState } from \"recoil/atoms/atoms\";\nimport { filteredBookmarkSelector } from \"recoil/selectors/selectors\";\nimport styled from \"styled-components\";\nimport FootPage from \"pages/MainPage/FootPage\";\n\nfunction DetailPage(): JSX.Element {\n  const location = useLocation();\n  // 선택된 책 정보\n  const result = location.state.result;\n  const barcode = location.state.result.isbn;\n  // 선택됐는지 확인 여부\n  const watch = location.state.watch;\n  console.log(result);\n  // 최근 검색기록\n  const [recent, setRecent] = useRecoilState(recentState);\n  const [bookmarkList, setBookmarkList] = useRecoilState(bookmarkState);\n  const filteredBookmark = useRecoilValue(filteredBookmarkSelector(result));\n\n  // 1.먼저 선택됐는지 안됐는지 상태값과\n  //  선택된 첵 isbn 값을 가지고 새로운 배열에 추가\n  // 만약 선택된 책 isbn 값이 배열에 있으면 빼고, 없으면 추가\n  //\n  useEffect(() => {\n    if (watch) {\n      if (recent.findIndex((item: BookDTO) => item.isbn === barcode) === -1) {\n        const newRecent: string[] = [...recent];\n        newRecent.push(result);\n        setRecent(newRecent);\n      }\n    }\n  }, [recent]);\n\n  // 뒤로가기\n  const navigate = useNavigate();\n  const goBack = () => {\n    navigate(-1);\n  };\n\n  // 나의 위시북\n\n  const isWishBook = bookmarkList.find(({ isbn }: BookDTO) =>\n    isbn.includes(String(barcode))\n  );\n  const toggleBookmark = () => {\n    let wishBookList = [...bookmarkList];\n\n    if (!isWishBook) {\n      wishBookList.push(result);\n      setBookmarkList(wishBookList);\n    } else {\n      wishBookList = wishBookList.filter(({ isbn }) => isbn !== barcode);\n      setBookmarkList(wishBookList);\n    }\n  };\n\n  return (\n    <Wrapper>\n      <IconWrap>\n        <IconButton\n          icon={faChevronLeft}\n          fontSize=\"20px\"\n          color=\"#0047AB\"\n          onClick={goBack}\n        />\n        <IconButton\n          icon={isWishBook ? fasBookmark : farBookmark}\n          fontSize=\"20px\"\n          color=\"#0047AB\"\n          onClick={toggleBookmark}\n        ></IconButton>\n      </IconWrap>\n      <WishBookItemImg\n        title={result.title}\n        thumbnail={result.thumbnail}\n        page=\"detail\"\n      ></WishBookItemImg>\n      <WishBookItemInfo\n        authors={result.authors}\n        contents={result.contents}\n        datetime={result.datetime}\n        isbn={result.isbn}\n        price={result.price}\n        publisher={result.publisher}\n        sale_price={result.sale_price}\n        status={result.status}\n        thumbnail={result.thumbnail}\n        title={result.title}\n        translators={result.translators}\n        url={result.url}\n        page=\"detail\"\n      ></WishBookItemInfo>\n      <FootPage page=\"detail\" />\n    </Wrapper>\n  );\n}\n\nexport default DetailPage;\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n`;\nconst IconWrap = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px var(--pd-content);\n`;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}