{"ast":null,"code":"import { atom, selector, selectorFamily } from \"recoil\";\nimport { recoilPersist } from \"recoil-persist\";\nconst {\n  persistAtom\n} = recoilPersist();\n\n// kakao API 호출\nconst KAKAO_API_KEY = process.env.REACT_APP_KAKAO_API_KEY;\nexport const bookData = selectorFamily({\n  key: \"bookData\",\n  get: search => async ({\n    get\n  }) => {\n    // API 호출\n    try {\n      const res = await axios({\n        method: \"get\",\n        baseURL: \"https://dapi.kakao.com/v3/search/book\",\n        headers: {\n          Authorization: \"KakaoAK \" + KAKAO_API_KEY\n        },\n        params: {\n          query: search,\n          size: 50,\n          target: [\"title\", \"person\"]\n        }\n      });\n      return res.data.documents;\n    } catch (error) {\n      if (error instanceof AxiosError) {\n        var _error$response;\n        if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 400) {\n          console.log(error);\n        }\n      }\n    }\n  }\n});\n\n// 검색어\nexport const searchInfoState = atom({\n  key: \"searchInfoState\",\n  default: \"\"\n});\n// 검색한 책\nexport const bookState = atom({\n  key: \"bookState\",\n  default: undefined\n});\n\n// 북마크한 책\nexport const bookmarkState = atom({\n  key: \"bookmark\",\n  default: [],\n  effects_UNSTABLE: [persistAtom]\n});\n// 상세보기 책\nexport const detailState = atom({\n  key: \"detailState\",\n  default: [],\n  effects_UNSTABLE: [persistAtom]\n});\nexport const bookSeletor = selector({\n  key: \"bookSeletor\",\n  get: ({\n    get\n  }) => {\n    const book = get(bookState);\n    console.log(book);\n  }\n});","map":{"version":3,"names":["atom","selector","selectorFamily","recoilPersist","persistAtom","KAKAO_API_KEY","process","env","REACT_APP_KAKAO_API_KEY","bookData","key","get","search","res","axios","method","baseURL","headers","Authorization","params","query","size","target","data","documents","error","AxiosError","_error$response","response","status","console","log","searchInfoState","default","bookState","undefined","bookmarkState","effects_UNSTABLE","detailState","bookSeletor","book"],"sources":["/Users/zoe/Documents/Wishread/src/recoil/books.ts"],"sourcesContent":["import { BookDTO } from \"components/types/searchType\";\nimport { atom, selector, selectorFamily } from \"recoil\";\nimport { recoilPersist } from \"recoil-persist\";\n\nconst { persistAtom } = recoilPersist();\n\n// kakao API 호출\nconst KAKAO_API_KEY = process.env.REACT_APP_KAKAO_API_KEY;\n\nexport const bookData = selectorFamily({\n  key: \"bookData\",\n  get:\n    (search) =>\n    async ({ get }) => {\n      // API 호출\n      try {\n        const res = await axios({\n          method: \"get\",\n          baseURL: \"https://dapi.kakao.com/v3/search/book\",\n          headers: {\n            Authorization: \"KakaoAK \" + KAKAO_API_KEY,\n          },\n          params: {\n            query: search,\n            size: 50,\n            target: [\"title\", \"person\"],\n          },\n        });\n        return res.data.documents;\n      } catch (error) {\n        if (error instanceof AxiosError) {\n          if (error.response?.status === 400) {\n            console.log(error);\n          }\n        }\n      }\n    },\n});\n\n// 검색어\nexport const searchInfoState = atom({\n  key: \"searchInfoState\",\n  default: \"\",\n});\n// 검색한 책\nexport const bookState = atom<BookDTO[] | undefined>({\n  key: \"bookState\",\n  default: undefined,\n});\n\n// 북마크한 책\nexport const bookmarkState = atom({\n  key: \"bookmark\",\n  default: [],\n  effects_UNSTABLE: [persistAtom],\n});\n// 상세보기 책\nexport const detailState = atom({\n  key: \"detailState\",\n  default: [],\n  effects_UNSTABLE: [persistAtom],\n});\n\nexport const bookSeletor = selector({\n  key: \"bookSeletor\",\n  get: ({ get }) => {\n    const book = get(bookState);\n    console.log(book);\n  },\n});\n"],"mappings":"AACA,SAASA,IAAI,EAAEC,QAAQ,EAAEC,cAAc,QAAQ,QAAQ;AACvD,SAASC,aAAa,QAAQ,gBAAgB;AAE9C,MAAM;EAAEC;AAAY,CAAC,GAAGD,aAAa,CAAC,CAAC;;AAEvC;AACA,MAAME,aAAa,GAAGC,OAAO,CAACC,GAAG,CAACC,uBAAuB;AAEzD,OAAO,MAAMC,QAAQ,GAAGP,cAAc,CAAC;EACrCQ,GAAG,EAAE,UAAU;EACfC,GAAG,EACAC,MAAM,IACP,OAAO;IAAED;EAAI,CAAC,KAAK;IACjB;IACA,IAAI;MACF,MAAME,GAAG,GAAG,MAAMC,KAAK,CAAC;QACtBC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE,uCAAuC;QAChDC,OAAO,EAAE;UACPC,aAAa,EAAE,UAAU,GAAGb;QAC9B,CAAC;QACDc,MAAM,EAAE;UACNC,KAAK,EAAER,MAAM;UACbS,IAAI,EAAE,EAAE;UACRC,MAAM,EAAE,CAAC,OAAO,EAAE,QAAQ;QAC5B;MACF,CAAC,CAAC;MACF,OAAOT,GAAG,CAACU,IAAI,CAACC,SAAS;IAC3B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACd,IAAIA,KAAK,YAAYC,UAAU,EAAE;QAAA,IAAAC,eAAA;QAC/B,IAAI,EAAAA,eAAA,GAAAF,KAAK,CAACG,QAAQ,cAAAD,eAAA,uBAAdA,eAAA,CAAgBE,MAAM,MAAK,GAAG,EAAE;UAClCC,OAAO,CAACC,GAAG,CAACN,KAAK,CAAC;QACpB;MACF;IACF;EACF;AACJ,CAAC,CAAC;;AAEF;AACA,OAAO,MAAMO,eAAe,GAAGhC,IAAI,CAAC;EAClCU,GAAG,EAAE,iBAAiB;EACtBuB,OAAO,EAAE;AACX,CAAC,CAAC;AACF;AACA,OAAO,MAAMC,SAAS,GAAGlC,IAAI,CAAwB;EACnDU,GAAG,EAAE,WAAW;EAChBuB,OAAO,EAAEE;AACX,CAAC,CAAC;;AAEF;AACA,OAAO,MAAMC,aAAa,GAAGpC,IAAI,CAAC;EAChCU,GAAG,EAAE,UAAU;EACfuB,OAAO,EAAE,EAAE;EACXI,gBAAgB,EAAE,CAACjC,WAAW;AAChC,CAAC,CAAC;AACF;AACA,OAAO,MAAMkC,WAAW,GAAGtC,IAAI,CAAC;EAC9BU,GAAG,EAAE,aAAa;EAClBuB,OAAO,EAAE,EAAE;EACXI,gBAAgB,EAAE,CAACjC,WAAW;AAChC,CAAC,CAAC;AAEF,OAAO,MAAMmC,WAAW,GAAGtC,QAAQ,CAAC;EAClCS,GAAG,EAAE,aAAa;EAClBC,GAAG,EAAEA,CAAC;IAAEA;EAAI,CAAC,KAAK;IAChB,MAAM6B,IAAI,GAAG7B,GAAG,CAACuB,SAAS,CAAC;IAC3BJ,OAAO,CAACC,GAAG,CAACS,IAAI,CAAC;EACnB;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}