{"ast":null,"code":"import{selectorFamily}from\"recoil\";import axios,{AxiosError}from\"axios\";import{searchInfoState}from\"recoil/atoms/atoms\";// kakao API 호출\nconst KAKAO_API_KEY=process.env.REACT_APP_KAKAO_API_KEY;export const bookData=selectorFamily({key:\"bookData\",get:search=>async _ref=>{let{get}=_ref;const searchValue=get(searchInfoState);// API 호출\ntry{const res=await axios({method:\"get\",baseURL:\"https://dapi.kakao.com/v3/search/book\",headers:{Authorization:\"KakaoAK \"+KAKAO_API_KEY},params:{query:search,size:50,target:[\"title\",\"person\"]}});return res.data.documents;}catch(error){if(error instanceof AxiosError){var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===400){console.log(error);}}}}});","map":{"version":3,"names":["selectorFamily","axios","AxiosError","searchInfoState","KAKAO_API_KEY","process","env","REACT_APP_KAKAO_API_KEY","bookData","key","get","search","_ref","searchValue","res","method","baseURL","headers","Authorization","params","query","size","target","data","documents","error","_error$response","response","status","console","log"],"sources":["/Users/zoe/Documents/Wishread/src/recoil/selectors/api.ts"],"sourcesContent":["import { selector, selectorFamily } from \"recoil\";\nimport axios, { AxiosError } from \"axios\";\nimport { searchInfoState } from \"recoil/atoms/atoms\";\n\n// kakao API 호출\nconst KAKAO_API_KEY = process.env.REACT_APP_KAKAO_API_KEY;\n\nexport const bookData = selectorFamily({\n  key: \"bookData\",\n  get:\n    (search) =>\n    async ({ get }) => {\n      const searchValue = get(searchInfoState);\n\n      // API 호출\n      try {\n        const res = await axios({\n          method: \"get\",\n          baseURL: \"https://dapi.kakao.com/v3/search/book\",\n          headers: {\n            Authorization: \"KakaoAK \" + KAKAO_API_KEY,\n          },\n          params: {\n            query: search,\n            size: 50,\n            target: [\"title\", \"person\"],\n          },\n        });\n        return res.data.documents;\n      } catch (error) {\n        if (error instanceof AxiosError) {\n          if (error.response?.status === 400) {\n            console.log(error);\n          }\n        }\n      }\n    },\n});\n"],"mappings":"AAAA,OAAmBA,cAAc,KAAQ,QAAQ,CACjD,MAAO,CAAAC,KAAK,EAAIC,UAAU,KAAQ,OAAO,CACzC,OAASC,eAAe,KAAQ,oBAAoB,CAEpD;AACA,KAAM,CAAAC,aAAa,CAAGC,OAAO,CAACC,GAAG,CAACC,uBAAuB,CAEzD,MAAO,MAAM,CAAAC,QAAQ,CAAGR,cAAc,CAAC,CACrCS,GAAG,CAAE,UAAU,CACfC,GAAG,CACAC,MAAM,EACP,MAAAC,IAAA,EAAmB,IAAZ,CAAEF,GAAI,CAAC,CAAAE,IAAA,CACZ,KAAM,CAAAC,WAAW,CAAGH,GAAG,CAACP,eAAe,CAAC,CAExC;AACA,GAAI,CACF,KAAM,CAAAW,GAAG,CAAG,KAAM,CAAAb,KAAK,CAAC,CACtBc,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,uCAAuC,CAChDC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAU,CAAGd,aAC9B,CAAC,CACDe,MAAM,CAAE,CACNC,KAAK,CAAET,MAAM,CACbU,IAAI,CAAE,EAAE,CACRC,MAAM,CAAE,CAAC,OAAO,CAAE,QAAQ,CAC5B,CACF,CAAC,CAAC,CACF,MAAO,CAAAR,GAAG,CAACS,IAAI,CAACC,SAAS,CAC3B,CAAE,MAAOC,KAAK,CAAE,CACd,GAAIA,KAAK,WAAY,CAAAvB,UAAU,CAAE,KAAAwB,eAAA,CAC/B,GAAI,EAAAA,eAAA,CAAAD,KAAK,CAACE,QAAQ,UAAAD,eAAA,iBAAdA,eAAA,CAAgBE,MAAM,IAAK,GAAG,CAAE,CAClCC,OAAO,CAACC,GAAG,CAACL,KAAK,CAAC,CACpB,CACF,CACF,CACF,CACJ,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}